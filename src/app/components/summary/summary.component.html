<div class="summary-container">
  <div *ngIf="summary && summary.data; else noSummary" class="summary-content">
    
    <!-- Tabs de navegación -->
    <div class="mb-4">
      <div class="flex gap-2">
        <button 
          class="px-3 py-2 border-round text-sm font-medium cursor-pointer border-none"
          [ngClass]="{
            'bg-primary text-white': activeTab === 'resumen',
            'bg-gray-100 text-gray-700 hover:bg-gray-200': activeTab !== 'resumen'
          }"
          (click)="setActiveTab('resumen')">
          Resumen
        </button>
        <button 
          class="px-3 py-2 border-round text-sm font-medium cursor-pointer border-none"
          [ngClass]="{
            'bg-primary text-white': activeTab === 'detalles',
            'bg-gray-100 text-gray-700 hover:bg-gray-200': activeTab !== 'detalles'
          }"
          (click)="setActiveTab('detalles')">
          Detalles
        </button>
      </div>
    </div>

    <!-- Contenido del tab Resumen -->
    <div *ngIf="activeTab === 'resumen'">
      <!-- Encabezado: Símbolo y Nombre -->
      <div class="mb-4">
        <h2 class="text-2xl font-bold text-900 m-0">{{ summary.data.info?.symbol || '—' }}</h2>
        <p class="text-lg text-700 mt-1 mb-0">{{ summary.data.info?.name || summary.data.info?.shortName || '—' }}</p>
      </div>

      <!-- Precio Grande + Timestamp -->
      <div class="mb-4">
        <div class="text-4xl font-bold text-900 mb-2">
          ${{ summary.data.price?.lastPrice ? (summary.data.price.lastPrice | number:'1.2-2') : '—' }}
        </div>
        <div class="text-sm text-500">
          {{ summary.data.price?.datetimeLastPrice || '—' }}
        </div>
      </div>

      <!-- Línea de Variaciones: Día, 30D, YTD, 1A -->
      <div class="mb-4 pb-3 border-bottom-1 surface-border">
        <div class="grid">
          <div class="col-3">
            <div class="text-center">
              <div class="text-xs text-600 mb-1">Día</div>
              <div class="font-semibold"
                   [ngClass]="{
                     'text-green-600': summary.data.price?.performanceRelative > 0,
                     'text-red-600': summary.data.price?.performanceRelative < 0,
                     'text-600': summary.data.price?.performanceRelative === 0
                   }">
                {{ summary.data.price?.performanceRelative ? 
                   ((summary.data.price.performanceRelative > 0 ? '+' : '') + (summary.data.price.performanceRelative | number:'1.2-2') + '%') : '—' }}
              </div>
            </div>
          </div>
          <div class="col-3">
            <div class="text-center">
              <div class="text-xs text-600 mb-1">30D</div>
              <div class="font-semibold"
                   [ngClass]="{
                     'text-green-600': summary.data.price?.pct30D > 0,
                     'text-red-600': summary.data.price?.pct30D < 0,
                     'text-600': summary.data.price?.pct30D === 0
                   }">
                {{ summary.data.price?.pct30D ? 
                   ((summary.data.price.pct30D > 0 ? '+' : '') + (summary.data.price.pct30D | number:'1.2-2') + '%') : '—' }}
              </div>
            </div>
          </div>
          <div class="col-3">
            <div class="text-center">
              <div class="text-xs text-600 mb-1">YTD</div>
              <div class="font-semibold"
                   [ngClass]="{
                     'text-green-600': summary.data.price?.pctCY > 0,
                     'text-red-600': summary.data.price?.pctCY < 0,
                     'text-600': summary.data.price?.pctCY === 0
                   }">
                {{ summary.data.price?.pctCY ? 
                   ((summary.data.price.pctCY > 0 ? '+' : '') + (summary.data.price.pctCY | number:'1.2-2') + '%') : '—' }}
              </div>
            </div>
          </div>
          <div class="col-3">
            <div class="text-center">
              <div class="text-xs text-600 mb-1">1A</div>
              <div class="font-semibold"
                   [ngClass]="{
                     'text-green-600': summary.data.price?.pct1Y > 0,
                     'text-red-600': summary.data.price?.pct1Y < 0,
                     'text-600': summary.data.price?.pct1Y === 0
                   }">
                {{ summary.data.price?.pct1Y ? 
                   ((summary.data.price.pct1Y > 0 ? '+' : '') + (summary.data.price.pct1Y | number:'1.2-2') + '%') : '—' }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Contenido del tab Detalles -->
    <div *ngIf="activeTab === 'detalles'">
      <h4 class="text-lg font-medium text-700 mb-3">Información Detallada</h4>
      <div class="grid">
        <!-- Primera columna -->
        <div class="col-12 md:col-6">
          <div class="flex justify-content-between align-items-center py-2 border-bottom-1 surface-border">
            <span class="text-600 font-medium">Mercado</span>
            <span class="font-semibold text-700">{{ summary.data.info?.marketName || '—' }}</span>
          </div>
          <div class="flex justify-content-between align-items-center py-2 border-bottom-1 surface-border">
            <span class="text-600 font-medium">Apertura</span>
            <span class="font-semibold text-700">${{ summary.data.price?.openPrice ? (summary.data.price.openPrice | number:'1.2-2') : '—' }}</span>
          </div>
          <div class="flex justify-content-between align-items-center py-2 border-bottom-1 surface-border">
            <span class="text-600 font-medium">Cierre anterior</span>
            <span class="font-semibold text-700">${{ summary.data.price?.closePrice ? (summary.data.price.closePrice | number:'1.2-2') : '—' }}</span>
          </div>
          <div class="flex justify-content-between align-items-center py-2 border-bottom-1 surface-border">
            <span class="text-600 font-medium">Máximo día</span>
            <span class="font-semibold text-700">${{ summary.data.price?.maxDay ? (summary.data.price.maxDay | number:'1.2-2') : '—' }}</span>
          </div>
          <div class="flex justify-content-between align-items-center py-2 border-bottom-1 surface-border">
            <span class="text-600 font-medium">Mínimo día</span>
            <span class="font-semibold text-700">${{ summary.data.price?.minDay ? (summary.data.price.minDay | number:'1.2-2') : '—' }}</span>
          </div>
        </div>
        
        <!-- Segunda columna -->
        <div class="col-12 md:col-6">
          <div class="flex justify-content-between align-items-center py-2 border-bottom-1 surface-border">
            <span class="text-600 font-medium">Máximo 52S</span>
            <span class="font-semibold text-700">${{ summary.data.price?.max52W ? (summary.data.price.max52W | number:'1.2-2') : '—' }}</span>
          </div>
          <div class="flex justify-content-between align-items-center py-2 border-bottom-1 surface-border">
            <span class="text-600 font-medium">Mínimo 52S</span>
            <span class="font-semibold text-700">${{ summary.data.price?.min52W ? (summary.data.price.min52W | number:'1.2-2') : '—' }}</span>
          </div>
          <div *ngIf="summary.data.price?.volumeMoney" class="flex justify-content-between align-items-center py-2 border-bottom-1 surface-border">
            <span class="text-600 font-medium">Volumen</span>
            <span class="font-semibold text-700">{{ summary.data.price.volumeMoney | number:'1.0-0' }}</span>
          </div>
          <div *ngIf="summary.data.info?.hourOpen && summary.data.info?.hourClose" class="flex justify-content-between align-items-center py-2 border-bottom-1 surface-border">
            <span class="text-600 font-medium">Horario</span>
            <span class="font-semibold text-700">{{ summary.data.info.hourOpen }} - {{ summary.data.info.hourClose }}</span>
          </div>
          <div class="flex justify-content-between align-items-center py-2 border-bottom-1 surface-border">
            <span class="text-600 font-medium">Timestamp</span>
            <span class="font-semibold text-700">{{ summary.data.price?.datetimeLastPrice || '—' }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <ng-template #noSummary>
    <div class="no-summary text-center py-6">
      <i class="pi pi-info-circle text-6xl text-300 mb-3"></i>
      <h3 class="text-xl text-500 m-0">No hay datos de resumen</h3>
      <p class="text-sm text-400 mt-2 m-0">Selecciona un instrumento para ver su información detallada</p>
    </div>
  </ng-template>
</div>