<div class="summary-container">
  <div *ngIf="vm; else noSummary" class="summary-content">
    
    <!-- PestaÃ±as de navegaciÃ³n -->
    <div class="tabs">
      <button 
        class="tab-button"
        [class.active]="activeTab === 'resumen'"
        (click)="setActiveTab('resumen')">
        Resumen
      </button>
      <button 
        class="tab-button"
        [class.active]="activeTab === 'detalles'"
        (click)="setActiveTab('detalles')">
        Detalles
      </button>
    </div>

    <!-- Contenido de las pestaÃ±as -->
    <div class="tab-content">
      
      <!-- PestaÃ±a Resumen -->
      <div *ngIf="activeTab === 'resumen'">
        <!-- Encabezado: SÃ­mbolo y Nombre -->
        <div class="header-section">
          <h2 class="symbol">{{ vm.info.symbol }}</h2>
          <p class="name">{{ vm.info.name }}</p>
        </div>

        <!-- Precio Grande + Timestamp -->
        <div class="price-section">
          <div class="price-value">
            ${{ fmt2(vm.price.lastPrice) }}
          </div>
          <div class="price-timestamp">
            {{ vm.price.datetimeLastPrice || 'â€”' }}
          </div>
        </div>

        <!-- Banda de Variaciones: DÃ­a, 30D, YTD, 1A -->
        <div class="variations-band">
          <div class="variation-item">
            <div class="variation-label">DÃ­a</div>
            <div class="variation-value" [class]="pctClass(vm.price.pctDay)">
              {{ fmtPct(vm.price.pctDay) }}
            </div>
          </div>
          <div class="variation-item">
            <div class="variation-label">30D</div>
            <div class="variation-value" [class]="pctClass(vm.price.pct30D)">
              {{ fmtPct(vm.price.pct30D) }}
            </div>
          </div>
          <div class="variation-item">
            <div class="variation-label">YTD</div>
            <div class="variation-value" [class]="pctClass(vm.price.pctCY)">
              {{ fmtPct(vm.price.pctCY) }}
            </div>
          </div>
          <div class="variation-item">
            <div class="variation-label">1A</div>
            <div class="variation-value" [class]="pctClass(vm.price.pct1Y)">
              {{ fmtPct(vm.price.pct1Y) }}
            </div>
          </div>
        </div>

        <!-- InformaciÃ³n adicional -->
        <div class="additional-info">
          <div class="kv-row">
            <span class="k">Sector</span>
            <span class="v">Financiero</span>
          </div>
          <div class="kv-row">
            <span class="k">Moneda</span>
            <span class="v">CLP</span>
          </div>
          <div class="kv-row">
            <span class="k">PaÃ­s</span>
            <span class="v">Chile</span>
          </div>
        </div>
      </div>

      <!-- PestaÃ±a Detalles -->
      <div *ngIf="activeTab === 'detalles'">
        <div class="details-table">
          <!-- TÃ­tulo CotizaciÃ³n + Timestamp -->
          <div class="kv-row">
            <span class="k">CotizaciÃ³n</span>
            <span class="v">{{ vm.price.datetimeLastPrice || 'â€”' }}</span>
          </div>
          
          <!-- Filas de datos en orden estricto -->
          <div class="kv-row">
            <span class="k">Mercado</span>
            <span class="v">{{ vm.info.marketName }}</span>
          </div>
          
          <div class="kv-row">
            <span class="k">Apertura</span>
            <span class="v">${{ fmt2(vm.price.openPrice) }}</span>
          </div>
          
          <div class="kv-row">
            <span class="k">Cierre anterior</span>
            <span class="v">${{ fmt2(vm.price.closePrev) }}</span>
          </div>
          
          <div class="kv-row">
            <span class="k">MÃ¡ximo diario</span>
            <span class="v">${{ fmt2(vm.price.maxDay) }}</span>
          </div>
          
          <div class="kv-row">
            <span class="k">MÃ­nimo diario</span>
            <span class="v">${{ fmt2(vm.price.minDay) }}</span>
          </div>
          
          <div class="kv-row">
            <span class="k">MÃ¡ximo 52</span>
            <span class="v">${{ fmt2(vm.price.max52W) }}</span>
          </div>
          
          <div class="kv-row">
            <span class="k">MÃ­nimo 52 semanas</span>
            <span class="v">${{ fmt2(vm.price.min52W) }}</span>
          </div>
          
          <div class="kv-row">
            <span class="k">Volumen</span>
            <span class="v">{{ fmtInt(vm.price.volumeMoney) }}</span>
          </div>
          
          <div class="kv-row" *ngIf="vm.info.hourOpen && vm.info.hourClose">
            <span class="k">Horario</span>
            <span class="v">{{ vm.info.hourOpen }} - {{ vm.info.hourClose }}</span>
          </div>

          <!-- Separador VariaciÃ³n** % -->
          <div class="sep">VariaciÃ³n %</div>
          
          <div class="kv-row">
            <span class="k">1 MES</span>
            <span class="v" [class]="pctClass(vm.perf.m1)">{{ fmtPct(vm.perf.m1) }}</span>
          </div>
          
          <div class="kv-row">
            <span class="k">1 AÃ‘O</span>
            <span class="v" [class]="pctClass(vm.perf.y1)">{{ fmtPct(vm.perf.y1) }}</span>
          </div>
          
          <div class="kv-row">
            <span class="k">AÃ‘O A LA FECHA</span>
            <span class="v" [class]="pctClass(vm.perf.ytd)">{{ fmtPct(vm.perf.ytd) }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <ng-template #noSummary>
    <div class="no-summary">
      <div class="no-summary-icon">ðŸ“Š</div>
      <h3 class="no-summary-title">No hay datos de resumen</h3>
      <p class="no-summary-text">Selecciona un instrumento para ver su informaciÃ³n detallada</p>
    </div>
  </ng-template>
</div>